///////////////////////////////////////
//                                   //
// Desert Map 3 Mission 1            //
// DES3_1.TXT                        //
//                                   //
///////////////////////////////////////


// PAD DEFs

PAD WestGateS	10	GreenSarge		> 0
PAD WestGateH	10	GreenHalftrack1	> 0
PAD TripLine	11	GreenHalftrack1	> 0
PAD BeThere		11	GreenSarge		> 0

PAD Path20		20	TanTank5 > 0
PAD Path21		21	TanTank5 > 0
PAD Path22		22	TanTank5 > 0
PAD Path23		23	TanTank5 > 0
PAD Path24		24	TanTank2 > 0
PAD Path25		25	TanTank2 > 0
PAD Path26		26	TanTank2 > 0
PAD Path27		27	TanTank2 > 0
PAD Path28		28	TanTank2 > 0
PAD Path29		29	TanTank6 > 0
PAD Path30		30	TanTank6 > 0
PAD Path31		31	TanTank6 > 0
PAD Path32		32	TanTank6 > 0
PAD Path33		33	TanTank6 > 0

PAD TankTrip2	2	TanTank2 > 0
PAD TankTrip5	5	TanTank5 > 0
PAD TankTrip6	6	TanTank6 > 0

PAD Patrol540	40	TanRifle5 > 0
PAD Patrol541	41	TanRifle5 > 0

PAD Trip1		50	GreenSarge > 0
PAD Trip2		51 	GreenSarge > 0

PAD DonutS		72	GreenSarge > 0
PAD HoleS		73	GreenSarge > 0
PAD DonutT		72	GreenTank1 > 0
PAD HoleT		73	GreenTank1 > 0

// endgames
IF killed_GreenSarge THEN
	TRIGGERDELAY 1 tanwins

IF killed_GreenHalftrack1 THEN
	INVULNERABLESARGE,
	TRIGGERDELAY 1 tanwins

IF ALLOF killed_GreenRifle1 killed_GreenRifle2 THEN
	INVULNERABLESARGE,
	TRIGGERDELAY 1 tanwins

IF on_TripLine THEN
	INVULNERABLESARGE,
	TRIGGERDELAY 3 greenwins

//oops
IF ALLOF killed_Arch1 killed_Arch2 THEN
	SHOWBMP "D31bad.bmp",
	PLAYSTREAM D31BAD
//	INVULNERABLESARGE,
//	TRIGGERDELAY 1 tanwins

IF killed_Arch3 THEN
	SHOWBMP "D31bad.bmp",
	PLAYSTREAM D31BAD
//	INVULNERABLESARGE,
//	TRIGGERDELAY 1 tanwins


// INIT
IF startup THEN
	VULNERABLESARGE,
	SETAICONTROL TanTank1,
	ORDER TanTank1 GOTO TanTank1 INMODE IGNORE THEN ATMODE IGNORE, //driven
	SETAICONTROL TanTank2,
	ORDER TanTank2 GOTO TanTank2 INMODE ATTACK THEN ATMODE ATTACK,
	SETAICONTROL TanTank5,
	ORDER TanTank5 GOTO TanTank5 INMODE ATTACK THEN ATMODE ATTACK,
	SETAICONTROL TanTank6,
	ORDER TanTank6 GOTO TanTank6 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL TanTank7,
	ORDER TanTank7 GOTO TanTank7 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL TanTank8,
	ORDER TanTank8 GOTO TanTank8 INMODE IGNORE THEN ATMODE IGNORE, //driven
	SETAICONTROL TanRifle1,
	ORDER TanRifle1 GOTO TanRifle1 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL TanGrenadier1,
	ORDER TanGrenadier1 GOTO TanGrenadier1 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL TanRifle2,
	ORDER TanRifle2 GOTO TanRifle2 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL TanRifle3,
	ORDER TanRifle3 GOTO TanRifle3 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL TanRifle8,
	ORDER TanRifle8 GOTO TanRifle8 INMODE IGNORE THEN ATMODE RETURNFIRE,
	SETAICONTROL TanRifle15,
	ORDER TanRifle15 GOTO TanRifle15 INMODE IGNORE THEN ATMODE RETURNFIRE,
	SETAICONTROL TanRifle16,
	ORDER TanRifle16 GOTO TanRifle16 INMODE ATTACK THEN ATMODE DEFEND,
	SETAICONTROL GreenHalftrack1,
	SETAICONTROL GreenRifle1,
	SETAICONTROL GreenRifle2,
	SETAICONTROL GreenRifle7,
	MAKESTRATEGIC GreenHalftrack1,
	TRIGGER GoGoTankManTan,
	TRIGGERDELAY 3 PatrolManGo


//Game events


IF REPEAT 1 OF on_WestGateS THEN
	TRIGGERDELAY 1 GetInAndGo

IF GetInAndGo THEN
	ORDER GreenRifle1 FOLLOW GreenHalftrack1 INMODE IGNORE THEN TRIGGER 1In,
	ORDER GreenRifle2 FOLLOW GreenHalftrack1 INMODE IGNORE THEN TRIGGER 2In,
	ORDER GreenRifle7 FOLLOW GreenHalftrack1 INMODE IGNORE THEN TRIGGER 7In

IF ALLOF 1In 2In 7In THEN
	REMOVEOBJECT Lure1,
	PLACEOBJECT Lure1 (2660, 2780),	//this makes bank strategic
	SHOWBMP "Ds3m1B.BMP",
	PLAYSTREAM DS3M1B,
	TRIGGER GoGoGo

IF GoGoGo THEN
	ORDER GreenHalftrack1 GOTO (2390, 2700) SLOW INMODE IGNORE THEN TRIGGER GetGo

IF GetGo THEN
	TRIGGERDELAY 3 GoGoGo










//Itemdrops
IF killed_MagiCrate5 THEN
	REMOVEOBJECT Meds1,
	PLACEOBJECT Meds1 MagiCrate5
IF killed_MagiCrate2 THEN
	REMOVEOBJECT Bazooka2,
	PLACEOBJECT Bazooka2 MagiCrate2
IF killed_MagiCrate3 THEN
	REMOVEOBJECT Meds3,
	PLACEOBJECT Meds3 MagiCrate3
IF killed_MagiCrate4 THEN
	REMOVEOBJECT Meds4,
	PLACEOBJECT Meds4 MagiCrate4
IF killed_HidingCrate3 THEN
	REMOVEOBJECT Flam7,
	PLACEOBJECT Flam7 HidingCrate3
IF killed_SecretCrate1 THEN
	REMOVEOBJECT MortarMe,
	PLACEOBJECT MortarMe SecretCrate1
IF killed_ReconCrate11 THEN
	REMOVEOBJECT Recon11,
	PLACEOBJECT Recon11 ReconCrate11
IF killed_ReconCrate12 THEN
	REMOVEOBJECT Recon12,
	PLACEOBJECT Recon12 ReconCrate12




//go grab that tank!
IF REPEAT 1 OF on_Trip1 THEN
	TRIGGER GoTR8
IF GoTR8 BUTNOT killed_TanTank1 THEN
	SETAICONTROL TanRifle8,
	ORDER TanRifle8 GOTO TanTank1 INMODE IGNORE THEN TRIGGER GetIn
IF GetIn THEN
	UNDEPLOY TanRifle8,
	TRIGGERDELAY 1.2 Ignition
IF Ignition THEN
	SETAICONTROL TanTank1,
	ORDER TanTank1 GOTO GreenSarge INMODE ATTACK THEN ATMODE ATTACK
IF ALLOF GoTR8 killed_TanTank1 THEN
	ORDER TanRifle8 GOTO GreenSarge INMODE ATTACK THEN ATMODE ATTACK


IF REPEAT 1 OF on_Trip2 THEN
	TRIGGER GoTR15
IF GoTR15 BUTNOT killed_TanTank8 THEN
	SETAICONTROL TanRifle15,
	ORDER TanRifle15 GOTO TanTank8 INMODE IGNORE THEN TRIGGER GetIn2
IF GetIn2 THEN
	UNDEPLOY TanRifle15,
	TRIGGERDELAY 1.5 Ignition2
IF Ignition2 THEN
	SETAICONTROL TanTank8,
	ORDER TanTank8 GOTO GreenSarge INMODE ATTACK THEN ATMODE ATTACK
IF ALLOF GoTR15 killed_TanTank8 THEN
	ORDER TanRifle15 GOTO GreenSarge INMODE ATTACK THEN ATMODE ATTACK

//patrols
IF PatrolManGo THEN
	TRIGGER Patrol5

IF Patrol5 THEN SEQUENTIAL
	ORDER TanRifle5 GOTO Patrol540 INMODE ATTACK THEN TRIGGER Patrol5,
	ORDER TanRifle5 GOTO Patrol541 INMODE ATTACK THEN TRIGGER Patrol5

IF GoGoTankManTan THEN
	SETAICONTROL TanTank5,
	SETAICONTROL TanRifle10,
	SETAICONTROL TanTank2,
	SETAICONTROL TanRifle13,
	SETAICONTROL TanTank6,
	SETAICONTROL TanRifle11,
	ORDER TanRifle10 FOLLOW TanTank5 INMODE DEFEND,
	ORDER TanRifle11 FOLLOW TanTank6 INMODE DEFEND,
	ORDER TanRifle13 FOLLOW TanTank2 INMODE DEFEND,
	TRIGGER GoGoTank2,
	TRIGGER GoGoTank5,
	TRIGGER GoGoTank6




IF GoGoTank2 THEN SEQUENTIAL
	ORDER TanTank2 GOTO Path24 SLOW INMODE ATTACK THEN TRIGGER GoGoTank2,
	ORDER TanTank2 GOTO Path25 SLOW INMODE ATTACK THEN TRIGGER GoGoTank2,
	ORDER TanTank2 GOTO Path26 SLOW INMODE ATTACK THEN TRIGGER GoGoTank2,
	ORDER TanTank2 GOTO Path27 SLOW INMODE ATTACK THEN TRIGGER GoGoTank2,
	ORDER TanTank2 GOTO Path28 SLOW INMODE ATTACK THEN TRIGGER GoGoTank2
IF on_TankTrip2 AFTER off_TankTrip2 THEN
	TRIGGERDELAY 5 GoGoTank2


IF GoGoTank5 THEN SEQUENTIAL
	ORDER TanTank5 GOTO Path20 SLOW INMODE ATTACK THEN TRIGGER GoGoTank5,
	ORDER TanTank5 GOTO Path21 SLOW INMODE ATTACK THEN TRIGGER GoGoTank5,
	ORDER TanTank5 GOTO Path22 SLOW INMODE ATTACK THEN TRIGGER GoGoTank5,
	ORDER TanTank5 GOTO Path23 SLOW INMODE ATTACK THEN TRIGGER GoGoTank5
IF on_TankTrip5 AFTER off_TankTrip5 THEN
	TRIGGERDELAY 5 GoGoTank5

IF GoGoTank6 THEN SEQUENTIAL
	ORDER TanTank6 GOTO Path29 SLOW INMODE ATTACK THEN TRIGGER GoGoTank6,
	ORDER TanTank6 GOTO Path30 SLOW INMODE ATTACK THEN TRIGGER GoGoTank6,
	ORDER TanTank6 GOTO Path31 SLOW INMODE ATTACK THEN TRIGGER GoGoTank6,
	ORDER TanTank6 GOTO Path32 SLOW INMODE ATTACK THEN TRIGGER GoGoTank6,
	ORDER TanTank6 GOTO Path33 SLOW INMODE ATTACK THEN TRIGGER GoGoTank6
IF on_TankTrip6 AFTER off_TankTrip6 THEN
	TRIGGERDELAY 5  GoGoTank6
